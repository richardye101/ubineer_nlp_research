
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Our Setup: Data ETL and Methods of evaluation &#8212; Unsupervised analysis of Textual data from 10K Financial Reports</title>
    
  <link href="../../_static/css/theme.css" rel="stylesheet">
  <link href="../../_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="../../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="../../_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/clipboard.min.js"></script>
    <script src="../../_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="../../_static/sphinx-book-theme.d59cb220de22ca1c485ebbdc042f0030.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../../_static/sphinx-thebe.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../../_static/favicon.png"/>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Word embedding using tf-idf matrices" href="1_Tf-idf_analysis.html" />
    <link rel="prev" title="Unsupervised analysis of Textual data from 10K Financial Reports" href="../../intro.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="../../index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="../../_static/favicon.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">Unsupervised analysis of Textual data from 10K Financial Reports</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="../../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../../intro.html">
   <center>
    Unsupervised analysis of Textual data from 10K Financial Reports
   </center>
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Methods
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Our Setup: Data ETL and Methods of evaluation
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Word Embedding
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="1_Tf-idf_analysis.html">
   Word embedding using tf-idf matrices
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../peitong/1_Cosine_Similarity_Distances.html">
   Cosine Similarity Distances
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../peitong/2_Part_of_Speech_Tagging.html">
   Part-of-Speech (POS) Tagging
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="4_Word2Vec.html">
   Word2vec
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="5_Doc2Vec.html">
   Doc2Vec
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Topic Modelling
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="2_LDA_topic_modelling.html">
   LDA (Latent Dirichlet Allocation)
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="3_LSA_topic_modelling.html">
   Experimenting with lemmatization SVD/LSA
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mary/Report_USE.html">
   Universal Sentence Encoder
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mary/Report_TwoTowers.html">
   Two Towers
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Dynamic Topic Modelling Analysis
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="8_Dynamic_Embedding.html">
   Embedding methods to augment with dynamic analysis
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="../mary/Report_Topic_Modelling.html">
   Dynamic Topic Modelling
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Portfolio Analysis
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="../peitong/3_Minimum_Variance_Analysis.html">
   Mean-Variance Analysis - Minimum Variance
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="../../_sources/content/richard/0_Methods.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
                onclick="printPdf(this)" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/richardye101/ubineer_nlp_research"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/richardye101/ubineer_nlp_research/issues/new?title=Issue%20on%20page%20%2Fcontent/richard/0_Methods.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/richardye101/ubineer_nlp_research/main?urlpath=tree/../content/content/richard/0_Methods.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="../../_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show noprint">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav" aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-data">
   The data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#schema">
     Schema
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extraction">
     Extraction
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cleaning">
     Cleaning
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pre-processing">
     Pre-processing
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualizing-our-work">
   Visualizing our work
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Our Setup: Data ETL and Methods of evaluation</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#the-data">
   The data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#schema">
     Schema
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#extraction">
     Extraction
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cleaning">
     Cleaning
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#pre-processing">
     Pre-processing
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualizing-our-work">
   Visualizing our work
  </a>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="our-setup-data-etl-and-methods-of-evaluation">
<h1>Our Setup: Data ETL and Methods of evaluation<a class="headerlink" href="#our-setup-data-etl-and-methods-of-evaluation" title="Permalink to this headline">¶</a></h1>
<p>This report relies upon the data which has analyzed and preprocessed in order to maximize information extraction. The original data was generously provided to us by <a class="reference external" href="https://www.ubineer.com">Ubineer</a>, a fin-tech start-up based out of the University of Toronto. This page will go in depth into the methods we used to obtain, clean, and preprocess our data. The methods used for plotting and evaluating the results are also described below.</p>
<div class="section" id="the-data">
<h2>The data<a class="headerlink" href="#the-data" title="Permalink to this headline">¶</a></h2>
<p>As mentioned above, we obtained our data from Ubineer, which they store in Googles BigQuery platform. They’ve already performed a lot of leg work processing gigabytes worth of annual reports, extracting text fields such as the <code class="docutils literal notranslate"><span class="pre">Business</span> <span class="pre">Description</span></code>, <code class="docutils literal notranslate"><span class="pre">Business</span> <span class="pre">Risk</span></code> and <code class="docutils literal notranslate"><span class="pre">Management's</span> <span class="pre">Discussion</span> <span class="pre">and</span> <span class="pre">Analysis</span> <span class="pre">of</span> <span class="pre">Financial</span> <span class="pre">Condition</span> <span class="pre">and</span> <span class="pre">Results</span> <span class="pre">of</span> <span class="pre">Operations</span></code>. In this report, we’ve focused on the <code class="docutils literal notranslate"><span class="pre">Business</span> <span class="pre">Description</span></code> data.</p>
<div class="section" id="schema">
<h3>Schema<a class="headerlink" href="#schema" title="Permalink to this headline">¶</a></h3>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>Column</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>accessionNumber</p></td>
<td><p>NA</p></td>
</tr>
<tr class="row-odd"><td><p>filingDate</p></td>
<td><p>When the report was filed with the SEC</p></td>
</tr>
<tr class="row-even"><td><p>reportingDate</p></td>
<td><p>The date which the report was prepared for</p></td>
</tr>
<tr class="row-odd"><td><p>financialEntity</p></td>
<td><p>Contains the CIK, specifying which company the report belongs to</p></td>
</tr>
<tr class="row-even"><td><p>htmlFile</p></td>
<td><p>Link to the report</p></td>
</tr>
<tr class="row-odd"><td><p>coDescription</p></td>
<td><p>The Business Description section of the Report</p></td>
</tr>
</tbody>
</table>
<p>An example row of the data is below:</p>
<table class="colwidths-auto table">
<thead>
<tr class="row-odd"><th class="head"><p>accessionNumber</p></th>
<th class="head"><p>filingDate</p></th>
<th class="head"><p>reportingDate</p></th>
<th class="head"><p>financialEntity</p></th>
<th class="head"><p>htmlFile</p></th>
<th class="head"><p>coDescription</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0001144204-09-017197</p></td>
<td><p>2009-03-31 10:22:32 UTC</p></td>
<td><p>2008-12-31 05:00:00 UTC</p></td>
<td><p>financialEntities/params;cik=1140028</p></td>
<td><p>https://www.sec.gov/Archives/edgar/data/1140028/000114420409017197/v143585_10k.htm</p></td>
<td><p>Item 1Business4&lt;a href=”#item1a”</p></td>
</tr>
</tbody>
</table>
<p>Notice how the Business Description column (<code class="docutils literal notranslate"><span class="pre">coDescription</span></code>) also contians some html noise.</p>
</div>
<div class="section" id="extraction">
<h3>Extraction<a class="headerlink" href="#extraction" title="Permalink to this headline">¶</a></h3>
<p>Within the BigQuery interface, we were able to query the data, although due to the sheer size of it (2GB+) we were unable to exatract it efficiently for analysis. Our supervisor Professor <a class="reference external" href="https://damouras.github.io/">Sotirious Damouras</a> was able to assist us in not only extracting the <code class="docutils literal notranslate"><span class="pre">coDescription</span></code> data, but also link each filing with a Company name, it’s respective <code class="docutils literal notranslate"><span class="pre">SIC</span></code> code (identifying the company’s operating industry), and the country and city they are headquartered. This data only contains filings from 2018, as the team agreed it would be best to avoid years plagued with COVID, but also have the most up to date information. As mentioned previously, the sheer size of data available prevented us from extracting all the company filings so we decided to filter only companies from the top five industries (based on number of companies). That gave us 1127 unique filings to analyze.</p>
<p>Here is a snippet:</p>
<div class="cell tag_hide-input docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_json</span><span class="p">(</span><span class="s2">&quot;../data/bq_2018_top5SIC.json&quot;</span><span class="p">,</span> <span class="n">lines</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>accessionNumber</th>
      <th>filingDate</th>
      <th>reportingDate</th>
      <th>financialEntity</th>
      <th>htmlFile</th>
      <th>coDescription</th>
      <th>CIK</th>
      <th>name</th>
      <th>countryinc</th>
      <th>cityma</th>
      <th>SIC</th>
      <th>SIC_desc</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0001441816-18-000028</td>
      <td>2018-03-30 20:12:23 UTC</td>
      <td>2018-02-01</td>
      <td>financialEntities/params;cik=1441816</td>
      <td>https://www.sec.gov/Archives/edgar/data/144181...</td>
      <td>Item 1. BusinessOverviewMongoDB is the leading...</td>
      <td>1441816</td>
      <td>MONGODB, INC.</td>
      <td>US</td>
      <td>NEW YORK</td>
      <td>7372</td>
      <td>Prepackaged Software (mass reproduction of sof...</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0001108524-18-000011</td>
      <td>2018-03-09 22:01:46 UTC</td>
      <td>2018-02-01</td>
      <td>financialEntities/params;cik=1108524</td>
      <td>https://www.sec.gov/Archives/edgar/data/110852...</td>
      <td>ITEM 1. BUSINESSOverviewSalesforce is a global...</td>
      <td>1108524</td>
      <td>SALESFORCE COM INC</td>
      <td>US</td>
      <td>SAN FRANCISCO</td>
      <td>7372</td>
      <td>Prepackaged Software (mass reproduction of sof...</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0001564590-18-006986</td>
      <td>2018-03-28 21:27:30 UTC</td>
      <td>2018-02-01</td>
      <td>financialEntities/params;cik=1385867</td>
      <td>https://www.sec.gov/Archives/edgar/data/138586...</td>
      <td>Item 1.Business1&lt;p style="margin-bottom:0pt;ma...</td>
      <td>1385867</td>
      <td>COUPA SOFTWARE INC</td>
      <td>US</td>
      <td>SAN MATEO</td>
      <td>7372</td>
      <td>Prepackaged Software (mass reproduction of sof...</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0001353283-18-000004</td>
      <td>2018-03-30 21:21:46 UTC</td>
      <td>2018-02-01</td>
      <td>financialEntities/params;cik=1353283</td>
      <td>https://www.sec.gov/Archives/edgar/data/135328...</td>
      <td>Item 1.  BusinessOverviewSplunk provides innov...</td>
      <td>1353283</td>
      <td>SPLUNK INC</td>
      <td>NaN</td>
      <td>SAN FRANCISCO</td>
      <td>7372</td>
      <td>Prepackaged Software (mass reproduction of sof...</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0001660134-18-000007</td>
      <td>2018-03-12 20:45:43 UTC</td>
      <td>2018-02-01</td>
      <td>financialEntities/params;cik=1660134</td>
      <td>https://www.sec.gov/Archives/edgar/data/166013...</td>
      <td>Item 1. BusinessOverview Okta is the leading i...</td>
      <td>1660134</td>
      <td>OKTA, INC.</td>
      <td>US</td>
      <td>SAN FRANCISCO</td>
      <td>7372</td>
      <td>Prepackaged Software (mass reproduction of sof...</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="cleaning">
<h3>Cleaning<a class="headerlink" href="#cleaning" title="Permalink to this headline">¶</a></h3>
<p>If you look closely, almost all <code class="docutils literal notranslate"><span class="pre">coDescription</span></code> value start with something like <em>“Item 1. Business Overview”</em>. Some even contain html code, identified by it’s surrounding <code class="docutils literal notranslate"><span class="pre">&lt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> angle brackets. One of the most important things to keep in mind is that our analysis can only be as good as our data.</p>
<p>In an effort to improve our data, we’ll be removing as much duplicate word data and HTML code as possible, as well as empty space and random quotations. This is done in the <code class="docutils literal notranslate"><span class="pre">std_func.py</span></code> files function <code class="docutils literal notranslate"><span class="pre">clean_data_fn()</span></code>, located <a class="reference external" href="https://github.com/richardye101/ubineer_nlp_research/blob/5a16caf65a0d2d21e8f377bd8b5f0d6b2435ad84/content/std_func.py#L65-L92">here</a>.</p>
<p>We also remove numbers, as they don’t actually provide us with any semantic meaning.</p>
<p>As a final filter, we also remove any filings that contain less than 250 characters in the <code class="docutils literal notranslate"><span class="pre">coDescription</span></code> column, as they don’t have enough data for us to analyze, or is a shell company with no actual business.</p>
<p>After cleaning, the <code class="docutils literal notranslate"><span class="pre">coDescription</span></code> column looks more like this:</p>
<div class="cell tag_remove-input tag_remove-stdout docutils container">
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [2],</span> in <span class="ni">&lt;cell line: 3&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">1</span> <span class="kn">import</span> <span class="nn">sys</span>  
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;..&#39;</span><span class="p">)</span>
<span class="ne">----&gt; </span><span class="mi">3</span> <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">stderr</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">devnull</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="kn">import</span> <span class="nn">std_func</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="n">cleaned_data</span> <span class="o">=</span> <span class="n">std_func</span><span class="o">.</span><span class="n">clean_data_fn</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;os&#39; is not defined
</pre></div>
</div>
</div>
</div>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [3],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;After cleaning, there are </span><span class="si">{}</span><span class="s2"> filings remaining&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">cleaned_data</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]))</span>

<span class="ne">NameError</span>: name &#39;cleaned_data&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>Much better!</p>
</div>
<div class="section" id="pre-processing">
<h3>Pre-processing<a class="headerlink" href="#pre-processing" title="Permalink to this headline">¶</a></h3>
<p>Now that the data has been cleaned, it’s time to dig in and really analyze it. Through our analysis, we’ve found that many words such as “are” and “is”, “running” and “ran” all carried their respective meaning, but yet represented as <em>different</em> words. In order to condense the sheer amount of data we have (in number of words), we perform something called <strong>lemmatization</strong>, the process of reducing words to their base form. “are” and “is” would be converted to “be”, and “running” and “ran” will be converted to “run”. With less word variations to deal with, our analysis is bound to improve!</p>
<p>Another pre-processing step taken was removing stop words. These words include words such as “the”, “and”, “that”, “is” among many more. These words themselves don’t carry any meaning, and our goal is to extract as much semantic information as possible out of our data. As these stop words don’t contriute to that goal (and they take up a LOT of room, just read the previou sentence and count the stop words!), we can further remove them to reduce the amount of data we need to process.</p>
<p>You can find the code <a class="reference external" href="https://github.com/richardye101/ubineer_nlp_research/blob/5a16caf65a0d2d21e8f377bd8b5f0d6b2435ad84/content/std_func.py#L94-L114">here</a>.</p>
<p>After these steps, our <code class="docutils literal notranslate"><span class="pre">coDescription</span></code> column looks like this:</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [4],</span> in <span class="ni">&lt;cell line: 1&gt;</span><span class="nt">()</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">processed_data</span> <span class="o">=</span> <span class="n">std_func</span><span class="o">.</span><span class="n">clean</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> <span class="n">processed_data</span><span class="o">.</span><span class="n">head</span><span class="p">()</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;coDescription_stopwords&quot;</span><span class="p">]</span>

<span class="ne">NameError</span>: name &#39;std_func&#39; is not defined
</pre></div>
</div>
</div>
</div>
<p>This results in detailed, concise business descriptions with as much fluff removed as possible. Our analysis depends on having as much information as possible, while also reducing the extraneous bits that don’t contribute to our analysis. This data is what we use through the majority of our analysis, existing as the <code class="docutils literal notranslate"><span class="pre">coDescription_stopwords</span></code> column.</p>
</div>
</div>
<div class="section" id="visualizing-our-work">
<h2>Visualizing our work<a class="headerlink" href="#visualizing-our-work" title="Permalink to this headline">¶</a></h2>
<p>Most of the analyses and work done in this report has been to perform unsupervised techniques to extract information from our data. As a result, many conclusions are in the form of document vector matrices, containing locations of each company filing in some n-dimensional space or its membership probability in m topics/industries. To accomplish this, we’ve devised a simple function that utilizes principle components analysis (PCA) to reduce our dimensions, condensing information into 2 and 3 dimensions for easy representation. Choosing to reduce to 10 dimensions (or less depending on the application) is simply arbitrary. We select the top 2-3 dimensions for representation, and (if available) use it’s industry name to color code them.</p>
<p>The code can be found <a class="reference external" href="https://github.com/richardye101/ubineer_nlp_research/blob/5a16caf65a0d2d21e8f377bd8b5f0d6b2435ad84/content/std_func.py#L20-L62">here</a>.</p>
<p>An example you will see later on of both 2D and 3D representations of a tf-idf matrix (the very first topic):</p>
<div class="cell tag_remove-input docutils container">
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">NameError</span><span class="g g-Whitespace">                                 </span>Traceback (most recent call last)
<span class="nn">Input In [5],</span> in <span class="ni">&lt;cell line: 10&gt;</span><span class="nt">()</span>
<span class="g g-Whitespace">      </span><span class="mi">6</span> <span class="n">pipe</span> <span class="o">=</span> <span class="n">Pipeline</span><span class="p">([(</span><span class="s1">&#39;count&#39;</span><span class="p">,</span> <span class="n">CountVectorizer</span><span class="p">(</span><span class="n">ngram_range</span> <span class="o">=</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">),</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span>                                            <span class="n">stop_words</span> <span class="o">=</span> <span class="s1">&#39;english&#39;</span><span class="p">,</span> <span class="n">max_features</span> <span class="o">=</span> <span class="mi">600</span><span class="p">)),</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span>                   <span class="p">(</span><span class="s1">&#39;tfidf&#39;</span><span class="p">,</span> <span class="n">TfidfTransformer</span><span class="p">())])</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;coDescription_stopwords&quot;</span><span class="p">])</span>
<span class="g g-Whitespace">      </span><span class="mi">9</span> <span class="n">tfidf</span> <span class="o">=</span>  <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">pipe</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;coDescription_stopwords&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">toarray</span><span class="p">())</span>
<span class="ne">---&gt; </span><span class="mi">10</span> <span class="n">plot</span> <span class="o">=</span> <span class="n">std_func</span><span class="o">.</span><span class="n">pca_visualize_2d</span><span class="p">(</span><span class="n">tfidf</span><span class="p">,</span> <span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,[</span><span class="s2">&quot;name&quot;</span><span class="p">,</span><span class="s2">&quot;SIC_desc&quot;</span><span class="p">]])</span>
<span class="g g-Whitespace">     </span><span class="mi">11</span> <span class="n">std_func</span><span class="o">.</span><span class="n">pca_visualize_3d</span><span class="p">(</span><span class="n">plot</span><span class="p">)</span>

<span class="ne">NameError</span>: name &#39;std_func&#39; is not defined
</pre></div>
</div>
</div>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./content/richard"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
            
                <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="../../intro.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><center>Unsupervised analysis of Textual data from 10K Financial Reports</center></p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="1_Tf-idf_analysis.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Word embedding using tf-idf matrices</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            
        </div>
    </div>
    <footer class="footer">
  <p>
    
      By Peitong Lu, Mary Xu, Richard Ye<br/>
    
        &copy; Copyright 2022.<br/>
  </p>
</footer>
</main>


      </div>
    </div>
  
  <script src="../../_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>